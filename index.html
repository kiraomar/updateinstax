<!DOCTYPE html>
<html>
<head>
  <title>Live TV</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>
<body>

<h1>القنوات المباشرة</h1>
<div id="channels"></div>

<video id="video" controls width="600"></video>

<script>
const supabase = supabase.createClient(
  "YOUR_SUPABASE_URL",
  "YOUR_PUBLIC_ANON_KEY"
);

async function loadChannels() {
  const { data } = await supabase
    .from('channels')
    .select('*');

  const container = document.getElementById("channels");

  data.forEach(channel => {
    const btn = document.createElement("button");
    btn.innerText = channel.name;
    btn.onclick = () => playChannel(channel.url);
    container.appendChild(btn);
  });
}

function playChannel(url) {
  const video = document.getElementById("video");

  if (Hls.isSupported()) {
    const hls = new Hls();
    hls.loadSource(url);
    hls.attachMedia(video);
  } else {
    video.src = url;
  }
}

loadChannels();
</script>

</body>
</html>
